{% extends "base.html" %}

{% block title %}
    {% if page_title %}{{ page_title }}{% else %}–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}
{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs">
            <ul>
                <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="is-active"><a href="#" aria-current="page">–ù–æ–≤–æ—Å—Ç–∏</a></li>
            </ul>
        </nav>

        <div class="columns">
            <div class="column is-8 is-offset-1-widescreen">
                <h1 class="title is-2 mb-6 theme-title">
                    {% if page_title %}{{ page_title }}{% else %}üì∞ –ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞{% endif %}
                </h1>

                {% if news_list %}
                    <div class="news-feed">
                        {% for news in news_list %}
                            {% include "content/_news_card.html" with news_item=news %}
                        {% endfor %}
                    </div>
                    
                    {% if is_paginated %}
                    <nav class="pagination is-centered is-rounded my-6 custom-pagination" role="navigation" aria-label="pagination">
                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}" class="pagination-previous">
                                <span class="icon"><i class="fas fa-chevron-left"></i></span> –ù–∞–∑–∞–¥
                            </a>
                        {% else %}
                            <a class="pagination-previous" disabled>–ù–∞–∑–∞–¥</a>
                        {% endif %}
                        
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}" class="pagination-next">
                                –í–ø–µ—Ä–µ–¥ <span class="icon"><i class="fas fa-chevron-right"></i></span>
                            </a>
                        {% else %}
                            <a class="pagination-next" disabled>–í–ø–µ—Ä–µ–¥</a>
                        {% endif %}
                        
                        <ul class="pagination-list">
                            {% for num in paginator.page_range %}
                                {% if page_obj.number == num %}
                                    <li><a class="pagination-link is-current">{{ num }}</a></li>
                                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                    <li><a href="?page={{ num }}" class="pagination-link">{{ num }}</a></li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </nav>
                    {% endif %}
                
                {% else %}
                    <div class="notification is-light has-text-centered py-6">
                        <span class="icon is-large has-text-grey-light mb-3"><i class="far fa-newspaper fa-3x"></i></span>
                        <p class="title is-4 theme-title">–ü—É–±–ª–∏–∫–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                        <p class="subtitle is-6 has-text-grey">–ó–∞—Ö–æ–¥–∏—Ç–µ –ø–æ–∑–∂–µ!</p>
                    </div>
                {% endif %}
            </div>

            <div class="column is-3 is-hidden-touch">
                <div class="box sticky-widget">
                    <h3 class="title is-5 mb-4 theme-title">‚ö° –°–≤–µ–∂–µ–µ</h3>
                    {% include "content/_latest_news_widget.html" %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}