{% extends "base.html" %}

{% block title %}–ê—Ä—Ö–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs">
            <ul>
                <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="{% url 'content:list' %}">–ù–æ–≤–æ—Å—Ç–∏</a></li>
                <li class="is-active"><a href="#" aria-current="page">–ê—Ä—Ö–∏–≤</a></li>
            </ul>
        </nav>

        <div class="columns">
            <div class="column is-8 is-offset-1-widescreen">
                <h1 class="title is-2 mb-6 theme-title">
                    üóÇÔ∏è –ê—Ä—Ö–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π
                </h1>

                {% if news_list %}
                    <div class="news-feed">
                        {% for news in news_list %}
                            {% include "content/_news_card.html" with news_item=news %}
                        {% endfor %}
                    </div>

                    {% if is_paginated %}
                    <nav class="pagination is-centered is-rounded my-6 custom-pagination" role="navigation" aria-label="pagination">
                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}" class="pagination-previous">
                                <span class="icon"><i class="fas fa-chevron-left"></i></span> –ù–∞–∑–∞–¥
                            </a>
                        {% else %}
                            <a class="pagination-previous" disabled>–ù–∞–∑–∞–¥</a>
                        {% endif %}
                        
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}" class="pagination-next">
                                –í–ø–µ—Ä–µ–¥ <span class="icon"><i class="fas fa-chevron-right"></i></span>
                            </a>
                        {% else %}
                            <a class="pagination-next" disabled>–í–ø–µ—Ä–µ–¥</a>
                        {% endif %}
                        
                        <ul class="pagination-list">
                            {% for num in paginator.page_range %}
                                {% if page_obj.number == num %}
                                    <li><a class="pagination-link is-current">{{ num }}</a></li>
                                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                    <li><a href="?page={{ num }}" class="pagination-link">{{ num }}</a></li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </nav>
                    {% endif %}
                {% else %}
                    <div class="notification is-light has-text-centered py-6">
                        <p class="title is-4 theme-title">–í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–µ –±—ã–ª–æ</p>
                        <a href="{% url 'content:list' %}" class="button is-primary is-outlined">
                            –í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Å–µ–º –Ω–æ–≤–æ—Å—Ç—è–º
                        </a>
                    </div>
                {% endif %}
            </div>
            
            <div class="column is-3">
                <div class="box sticky-widget">
                    <h3 class="title is-5 mb-4 theme-title">üìÖ –ü–æ –¥–∞—Ç–∞–º</h3>
                    <aside class="menu">
                        {% for year, months in grouped_archive.items %}
                            <p class="menu-label theme-text has-text-weight-bold mt-4 mb-2">
                                {{ year }} –≥–æ–¥
                            </p>
                            
                            <ul class="menu-list">
                                {% for item in months %}
                                    <li>
                                        <a href="{% url 'content:news_by_month' year=item.year month=item.month %}" 
                                           class="is-flex is-justify-content-space-between is-align-items-center theme-link-grey py-2">
                                            <span>
                                                {% if item.month == 1 %}–Ø–Ω–≤–∞—Ä—å
                                                {% elif item.month == 2 %}–§–µ–≤—Ä–∞–ª—å
                                                {% elif item.month == 3 %}–ú–∞—Ä—Ç
                                                {% elif item.month == 4 %}–ê–ø—Ä–µ–ª—å
                                                {% elif item.month == 5 %}–ú–∞–π
                                                {% elif item.month == 6 %}–ò—é–Ω—å
                                                {% elif item.month == 7 %}–ò—é–ª—å
                                                {% elif item.month == 8 %}–ê–≤–≥—É—Å—Ç
                                                {% elif item.month == 9 %}–°–µ–Ω—Ç—è–±—Ä—å
                                                {% elif item.month == 10 %}–û–∫—Ç—è–±—Ä—å
                                                {% elif item.month == 11 %}–ù–æ—è–±—Ä—å
                                                {% elif item.month == 12 %}–î–µ–∫–∞–±—Ä—å
                                                {% endif %}
                                            </span>
                                            <span class="tag is-light is-rounded is-small" style="height: 1.5em;">{{ item.count }}</span>
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% empty %}
                            <p class="has-text-grey is-size-7">–ê—Ä—Ö–∏–≤ –ø—É—Å—Ç</p>
                        {% endfor %}
                    </aside>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}